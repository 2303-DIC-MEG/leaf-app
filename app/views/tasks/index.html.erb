<p id="notice"><%= notice %></p>

<h1>Tasks</h1>
<br>

<h4>Search</h4>
<%= form_with local: true, method: :get, url: tasks_path do |form| %>
  <div class ="search_form">
    <%= form.label :title %>
    <%= form.text_field :title %>
    <%= form.label :status %>
        <%= form.select :status,  [["Not started", "Not started"], 
                                ["In progress", "In progress"], 
                                ["Completed", "Completed"]],
                                { include_blank: " "} %>
    <%= form.submit 'search' %>
  </div>
<% end %>
<br>
<br>
<%= link_to 'New Task', new_task_path %>
<%= link_to 'Back', tasks_path %>
<br>
<br>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Content</th>
      <th><%= link_to "deadlineâ–¼", tasks_path(sort_expired_at: "true") %></th>
      <th>Created_at</th>
      <th>Status</th>
      <th><%= link_to "priorityâ–¼", tasks_path(sort_priority: "true") %></th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    
    <% @tasks.each do |task| %>
      <tr class = "task_list">
        <td><%= task.title %></td>
        <td><%= task.content %></td>
        <td><%= task.expired_at.strftime("%Y-%m-%d") %></td>
        <td><%= task.created_at.strftime("%Y-%m-%d %H:%M:%S") %></td>
        <td><%= task.status %></td>
        <td><%= task.priority %></td>
        <td><%= link_to 'Show', task %></td>
        <td><%= link_to 'Edit', edit_task_path(task) %></td>
        <td><%= link_to 'Destroy', task, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>


